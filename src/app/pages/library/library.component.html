<app-header transparent="true" title="Library" [actionTemplate]="actionTemplate">

	<ng-template #actionTemplate>

		<app-dropdown *ngIf="tab === 2" #dropdown [config]="{right: true}" [header]="headerTemplate">
			<ng-template #headerTemplate let-item="item">
				<div (click)="item.onToggle()" class="dropdown-action-item"><i class="material-icons-outlined">
						more_vert
					</i></div>
			</ng-template>

			<div class="dropdown-action-list">

				<a (click)="onCreate()">New playlist <i class="feather-plus"></i></a>


			</div>
		</app-dropdown>
	</ng-template>

</app-header>






<div class="toggle">
	<div (click)="setTab(0)" class="value {{ tab === 0 ? 'active' : '' }}">
		Albums
	</div>
	<div (click)=" setTab(1)" class="value {{ tab === 1 ? 'active' : '' }}">
		Artists
	</div>

	<div (click)=" setTab(2)" class="value {{ tab === 2 ? 'active' : '' }}">
		Playlists
	</div>
</div>
<div class="relative">

	<infinite-scroll (scrolled)="onScroll()">
		<div class="library">

			<ng-container *ngIf="tab === 1">

				<div class="column" *ngFor="let artist of artists" routerLink="./artists/{{ artist.id }}">
					<img width="170" height="170" class="lazyload"
						[lazyLoad]="artist.picture || '/assets/app-icon-text.png'" />

					<div class="column-details">
						<div class="title">{{ artist.name }}</div>
					</div>

				</div>

			</ng-container>
			<ng-container *ngIf="tab === 0">

				<div class="column" *ngFor="let album of albums" routerLink="./albums/{{ album.id }}">
					<img class="lazyload" [lazyLoad]="album.picture || '/assets/app-icon-text.png'" />

					<div class="column-details">
						<div class="title">{{ album.name }}</div>
						<div class="subtitle">{{ album.artist.name }}</div>
					</div>


				</div>
			</ng-container>

		</div>

	</infinite-scroll>

	<ng-container *ngIf="tab === 2">

		<div class="playlists">

			<div class="playlist" *ngFor="let playlist of playlists">


				<div routerLink="/tracks" [queryParams]="{ playlist: playlist.id}" class="playlist-name">{{
					playlist.name }}
				</div>
				<div *ngIf="!playlist.readonly" class="playlist-actions">
					<app-dropdown #dropdown [config]="{right: true}" [header]="headerTemplate">
						<ng-template #headerTemplate let-item="item">
							<div (click)="item.onToggle()" class="dropdown-action-item"><i
									class="material-icons-outlined">
									more_vert
								</i></div>
						</ng-template>

						<div class="dropdown-action-list">

							<a (click)="onEdit(playlist)">Edit</a>
							<a (click)="onDelete(playlist)">Delete</a>


						</div>
					</app-dropdown>
				</div>

			</div>

		</div>
	</ng-container>
	<app-loading [loading]="loading"></app-loading>


</div>
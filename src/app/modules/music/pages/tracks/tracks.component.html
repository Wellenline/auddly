<app-header [sticky]="true">
	<div header-title>
		<h3>Tracks</h3>
	</div>

	<div header-actions appRipple class="icon" [dropdownTriggerFor]="dropdown">


		<i class="ph-sliders-horizontal"></i>
		<app-dropdown #dropdown>
			<div class="dropdown-item" (click)="onSort('name')">Sort by name</div>
			<div class="dropdown-item" (click)="onSort('created_at')">Sort by date</div>
		</app-dropdown>

	</div>
</app-header>



<div class="filters">

	<div class="filter">
		<label>Genre</label>
		<select [(ngModel)]="filter.genre" (ngModelChange)="onFilter()">

			<option value="">All</option>
			<option *ngFor="let genre of genres" [value]="genre._id">{{ genre.name }}</option>
		</select>
	</div>
	<div class="filter">
		<label>Playlist</label>

		<select [(ngModel)]="filter.playlist" (ngModelChange)="onFilter()">
			<option value="">All</option>
			<option *ngFor="let playlist of playlists" [value]="playlist._id">{{ playlist.name }}
			</option>
		</select>
	</div>


	<div class="filter small">
		<label>Limit</label>

		<select [(ngModel)]="filter.limit" (ngModelChange)="onFilter()">
			<option *ngFor="let limit of limits" [value]="limit">{{ limit }}</option>
		</select>
	</div>
</div>

<virtual-scroller [checkResizeInterval]="200" (vsEnd)="onScroll($event)" #scroll [items]="tracks"
	[ngStyle]="{'height.px': (hostHeight$ | async)- 105 }">


	<div *ngFor="let track of scroll.viewPortItems; ">
		<app-track-item [track]="track"></app-track-item>
	</div>
</virtual-scroller>

<app-loading [loading]="loading"></app-loading>
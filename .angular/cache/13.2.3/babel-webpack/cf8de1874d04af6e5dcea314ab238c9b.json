{"ast":null,"code":"import { AlbumComponent } from \"../album/album.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/components/modal/modal.component\";\nimport * as i2 from \"src/app/shared/components/toast/toast.service\";\nimport * as i3 from \"src/app/services/player.service\";\nimport * as i4 from \"src/app/core/services/music.service\";\nimport * as i5 from \"src/app/shared/components/modal/modal.service\";\nimport * as i6 from \"../../../../shared/components/header/header.component\";\nimport * as i7 from \"ng-lazyload-image\";\nimport * as i8 from \"@angular/common\";\n\nfunction ArtistComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tag_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", tag_r3, \" \");\n  }\n}\n\nfunction ArtistComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵlistener(\"click\", function ArtistComponent_div_16_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const similar_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.onSearch(similar_r4);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const similar_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(similar_r4);\n  }\n}\n\nfunction ArtistComponent_ng_container_17_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 15);\n    i0.ɵɵlistener(\"click\", function ArtistComponent_ng_container_17_ng_container_4_Template_div_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const album_r8 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.onAlbum(album_r8._id);\n    });\n    i0.ɵɵelement(2, \"img\", 16);\n    i0.ɵɵelementStart(3, \"div\", 17);\n    i0.ɵɵelementStart(4, \"div\", 18);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 19);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const album_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", album_r8.picture || \"/assets/app-icon-text.png\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(album_r8.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(album_r8.artist.name);\n  }\n}\n\nfunction ArtistComponent_ng_container_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h3\");\n    i0.ɵɵtext(2, \"Albums\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 13);\n    i0.ɵɵtemplate(4, ArtistComponent_ng_container_17_ng_container_4_Template, 8, 3, \"ng-container\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.albums);\n  }\n}\n\nexport let ArtistComponent = /*#__PURE__*/(() => {\n  class ArtistComponent {\n    constructor(modal, toastService, playerService, musicService, modalService) {\n      this.modal = modal;\n      this.toastService = toastService;\n      this.playerService = playerService;\n      this.musicService = musicService;\n      this.modalService = modalService;\n      this.artist = {};\n      this.albums = [];\n      this.tracks = [];\n      this.loading = true;\n      this.result = {\n        albums: [],\n        tracks: [],\n        artists: [],\n        playlists: []\n      };\n    }\n\n    ngOnInit() {\n      this.getData(this.modal.params.id);\n    }\n\n    getData(id) {\n      this.getArtist(id);\n      this.getAlbums(id);\n      this.getPopular(id);\n    }\n\n    getArtist(id) {\n      this.loading = true;\n      this.musicService.getArtist(id).subscribe(response => {\n        this.artist = response;\n        this.getSearchResults(this.artist.name);\n      }, err => {\n        console.log(err);\n      }).add(() => {\n        this.loading = false;\n      });\n    }\n\n    getAlbums(id) {\n      this.loading = true;\n      this.musicService.getAlbums({\n        artist: id\n      }).subscribe(response => {\n        this.albums = response.albums;\n      }, err => {\n        console.log(err);\n      }).add(() => {\n        this.loading = false;\n      });\n    }\n\n    getPopular(id) {\n      this.loading = true;\n      this.musicService.getTracks({\n        popular: true,\n        artist: id,\n        limit: 10\n      }).subscribe(response => {\n        this.tracks = response.tracks;\n      }, err => {\n        console.log(err);\n      }).add(() => {\n        this.loading = false;\n      });\n    }\n\n    onPlayTracks() {\n      if (this.tracks.length > 0) {\n        this.playerService.onPlay(...this.tracks);\n      }\n    }\n\n    getSearchResults(search) {\n      if (search.length < 3) {\n        return;\n      }\n\n      this.musicService.search(search).subscribe(response => {\n        this.result = response;\n      }, err => {\n        console.log(err);\n      }).add(() => {\n        this.loading = false;\n      });\n    }\n\n    onSearch(similar) {\n      /*this.router.navigate([\"\", {\n          outlets: { modal: null, primary: \"search\" },\n      }], {\n          queryParams: {\n              q: similar,\n          }\n      });*/\n      // [routerLink]=\"['/search', {outlets: {modal: [null]}}]\" [queryParams]=\"{ q: similar }\"\n    }\n\n    onAlbum(id) {\n      this.modalService.show({\n        component: AlbumComponent,\n        class: \"fullscreen\",\n        params: {\n          id\n        }\n      });\n    }\n\n  }\n\n  ArtistComponent.ɵfac = function ArtistComponent_Factory(t) {\n    return new (t || ArtistComponent)(i0.ɵɵdirectiveInject(i1.ModalComponent), i0.ɵɵdirectiveInject(i2.ToastService), i0.ɵɵdirectiveInject(i3.PlayerService), i0.ɵɵdirectiveInject(i4.MusicService), i0.ɵɵdirectiveInject(i5.ModalService));\n  };\n\n  ArtistComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ArtistComponent,\n    selectors: [[\"app-artist\"]],\n    decls: 18,\n    vars: 10,\n    consts: [[3, \"back\", \"backPreventDefault\", \"sticky\", \"transparent\", \"onClose\"], [1, \"container\"], [1, \"artist\"], [1, \"artist-header\"], [1, \"image\"], [1, \"lazyload\", 3, \"lazyLoad\"], [1, \"details\"], [1, \"tags\"], [\"class\", \"tag\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"tag\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"tag\"], [1, \"tag\", 3, \"click\"], [1, \"artist-albums\"], [4, \"ngFor\", \"ngForOf\"], [1, \"album\", 3, \"click\"], [3, \"src\"], [1, \"column-details\"], [1, \"title\"], [1, \"subtitle\"]],\n    template: function ArtistComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-header\", 0);\n        i0.ɵɵlistener(\"onClose\", function ArtistComponent_Template_app_header_onClose_0_listener() {\n          return ctx.modal.onClose();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelement(5, \"img\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵelementStart(7, \"h1\");\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"p\");\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 7);\n        i0.ɵɵtemplate(12, ArtistComponent_div_12_Template, 2, 1, \"div\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"h3\");\n        i0.ɵɵtext(14, \"Similar Artists\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 7);\n        i0.ɵɵtemplate(16, ArtistComponent_div_16_Template, 2, 1, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(17, ArtistComponent_ng_container_17_Template, 5, 1, \"ng-container\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"back\", true)(\"backPreventDefault\", true)(\"sticky\", true)(\"transparent\", true);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"lazyLoad\", ctx.artist.picture || \"/assets/app-icon-text.png\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.artist.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.artist.bio);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.artist.tags);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.artist.similar);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.albums.length > 0);\n      }\n    },\n    directives: [i6.HeaderComponent, i7.LazyLoadImageDirective, i8.NgForOf, i8.NgIf],\n    styles: [\"\"]\n  });\n  return ArtistComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
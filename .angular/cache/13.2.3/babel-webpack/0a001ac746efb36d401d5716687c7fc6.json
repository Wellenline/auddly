{"ast":null,"code":"import { AlbumComponent } from \"../album/album.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/http.service\";\nimport * as i2 from \"src/app/shared/components/modal/modal.service\";\nimport * as i3 from \"src/app/shared/components/modal/modal.component\";\nimport * as i4 from \"src/app/services/player.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"../../shared/components/header/header.component\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"../../components/track-list/track-list.component\";\n\nfunction ArtistComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tag_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", tag_r4, \" \");\n  }\n}\n\nfunction ArtistComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵlistener(\"click\", function ArtistComponent_div_16_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const similar_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.onSearch(similar_r5);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const similar_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(similar_r5);\n  }\n}\n\nfunction ArtistComponent_ng_container_17_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 18);\n    i0.ɵɵlistener(\"click\", function ArtistComponent_ng_container_17_ng_container_4_Template_div_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const album_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.onAlbum(album_r9._id);\n    });\n    i0.ɵɵelement(2, \"img\", 19);\n    i0.ɵɵelementStart(3, \"div\", 20);\n    i0.ɵɵelementStart(4, \"div\", 21);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 22);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const album_r9 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", album_r9.picture || \"/assets/app-icon-text.png\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(album_r9.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(album_r9.artist.name);\n  }\n}\n\nfunction ArtistComponent_ng_container_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h3\");\n    i0.ɵɵtext(2, \"Albums\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 16);\n    i0.ɵɵtemplate(4, ArtistComponent_ng_container_17_ng_container_4_Template, 8, 3, \"ng-container\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.albums);\n  }\n}\n\nfunction ArtistComponent_ng_container_18_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵelement(1, \"app-track-list\", 28);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const track_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"track\", track_r13);\n  }\n}\n\nfunction ArtistComponent_ng_container_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 23);\n    i0.ɵɵelementStart(2, \"h3\");\n    i0.ɵɵtext(3, \"Popular\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 24);\n    i0.ɵɵelementStart(5, \"div\", 25);\n    i0.ɵɵlistener(\"click\", function ArtistComponent_ng_container_18_Template_div_click_5_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.onPlayTracks();\n    });\n    i0.ɵɵtext(6, \" Play \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 3);\n    i0.ɵɵtemplate(8, ArtistComponent_ng_container_18_div_8_Template, 2, 1, \"div\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.tracks);\n  }\n}\n\nexport let ArtistComponent = /*#__PURE__*/(() => {\n  class ArtistComponent {\n    constructor(httpService, modalService, modalComponent, playerService, router, route) {\n      this.httpService = httpService;\n      this.modalService = modalService;\n      this.modalComponent = modalComponent;\n      this.playerService = playerService;\n      this.router = router;\n      this.route = route;\n      this.artist = {};\n      this.albums = [];\n      this.tracks = [];\n      this.result = {\n        albums: [],\n        tracks: [],\n        artists: [],\n        playlists: []\n      };\n      this.config = {\n        slidesOffsetBefore: 20,\n        slidesOffsetAfter: 20,\n        navigation: false,\n        pagination: false,\n        breakpoints: {\n          0: {\n            slidesPerView: 3,\n            spaceBetween: 20\n          },\n          // when window width is >= 320px\n          320: {\n            slidesPerView: 2,\n            spaceBetween: 20\n          },\n          // when window width is >= 480px\n          480: {\n            slidesPerView: 3,\n            spaceBetween: 30\n          },\n          // when window width is >= 640px\n          640: {\n            slidesPerView: 4,\n            spaceBetween: 40\n          },\n          1024: {\n            slidesPerView: 4,\n            spaceBetween: 40\n          }\n        }\n      };\n      this.loading = true;\n    }\n\n    ngOnInit() {\n      this.getData(this.modalComponent.params.artist);\n    }\n\n    getData(id) {\n      this.getArtist(id);\n      this.getAlbums(id);\n      this.getPopular(id);\n    }\n\n    getArtist(id) {\n      this.loading = true;\n      this.httpService.get(`/artists/${id}`).subscribe(response => {\n        this.artist = response;\n        this.getSearchResults(this.artist.name);\n      }, err => {\n        console.log(err);\n      }).add(() => {\n        this.loading = false;\n      });\n    }\n\n    getAlbums(id) {\n      this.loading = true;\n      this.httpService.get(`/albums?artist=${id}`).subscribe(response => {\n        this.albums = response.albums;\n      }, err => {\n        console.log(err);\n      }).add(() => {\n        this.loading = false;\n      });\n    }\n\n    getPopular(id) {\n      this.loading = true;\n      this.httpService.get(`/tracks?popular=true&artist=${id}&limit=10`).subscribe(response => {\n        this.tracks = response.tracks;\n      }, err => {\n        console.log(err);\n      }).add(() => {\n        this.loading = false;\n      });\n    }\n\n    onPlayTracks() {\n      if (this.tracks.length > 0) {\n        this.playerService.onPlay(...this.tracks);\n      }\n    }\n\n    getSearchResults(search) {\n      if (search.length < 3) {\n        return;\n      }\n\n      this.httpService.get(`/search?q=${search}`).subscribe(response => {\n        this.result = response;\n      }, err => {\n        console.log(err);\n      }).add(() => {\n        this.loading = false;\n      });\n    }\n\n    onSearch(similar) {\n      this.router.navigate([\"\", {\n        outlets: {\n          modal: null,\n          primary: \"search\"\n        }\n      }], {\n        queryParams: {\n          q: similar\n        }\n      }); // [routerLink]=\"['/search', {outlets: {modal: [null]}}]\" [queryParams]=\"{ q: similar }\"\n    }\n\n    onAlbum(album) {\n      this.modalService.show({\n        component: AlbumComponent,\n        // class: \"fullscreen\",\n        params: {\n          album: album\n        },\n        callback: () => {\n          this.router.navigate([], {\n            queryParams: {\n              'album': null\n            },\n            queryParamsHandling: 'merge'\n          });\n        }\n      });\n    }\n\n  }\n\n  ArtistComponent.ɵfac = function ArtistComponent_Factory(t) {\n    return new (t || ArtistComponent)(i0.ɵɵdirectiveInject(i1.HttpService), i0.ɵɵdirectiveInject(i2.ModalService), i0.ɵɵdirectiveInject(i3.ModalComponent), i0.ɵɵdirectiveInject(i4.PlayerService), i0.ɵɵdirectiveInject(i5.Router), i0.ɵɵdirectiveInject(i5.ActivatedRoute));\n  };\n\n  ArtistComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ArtistComponent,\n    selectors: [[\"app-artist\"]],\n    decls: 19,\n    vars: 7,\n    consts: [[\"transparent\", \"true\", \"back\", \"true\"], [1, \"container\", \"mx-auto\"], [1, \"artist-meta\"], [1, \"grid\"], [1, \"width-auto@md\", \"flex\", \"flex-middle\"], [1, \"artist-picture\", 3, \"src\"], [1, \"width-expand@md\"], [1, \"artist-details\"], [1, \"artist-name\"], [1, \"artist-bio\", 3, \"innerHTML\"], [1, \"tags\"], [\"class\", \"tag inactive\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"tag\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"tag\", \"inactive\"], [1, \"tag\", 3, \"click\"], [1, \"albums\"], [4, \"ngFor\", \"ngForOf\"], [1, \"album\", 3, \"click\"], [3, \"src\"], [1, \"column-details\"], [1, \"title\"], [1, \"subtitle\"], [1, \"title-action\"], [1, \"float-right\"], [1, \"play-button\", 3, \"click\"], [\"class\", \"width-4@lg width-4@md width-6@sm\", 4, \"ngFor\", \"ngForOf\"], [1, \"width-4@lg\", \"width-4@md\", \"width-6@sm\"], [3, \"track\"]],\n    template: function ArtistComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-header\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelement(5, \"img\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵelementStart(7, \"div\", 7);\n        i0.ɵɵelementStart(8, \"div\", 8);\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 10);\n        i0.ɵɵtemplate(12, ArtistComponent_div_12_Template, 2, 1, \"div\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"h3\");\n        i0.ɵɵtext(14, \"Similar Artists\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 10);\n        i0.ɵɵtemplate(16, ArtistComponent_div_16_Template, 2, 1, \"div\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(17, ArtistComponent_ng_container_17_Template, 5, 1, \"ng-container\", 13);\n        i0.ɵɵtemplate(18, ArtistComponent_ng_container_18_Template, 9, 1, \"ng-container\", 13);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"src\", ctx.artist.picture || \"/assets/app-icon-text.png\", i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.artist.name);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"innerHTML\", ctx.artist.bio, i0.ɵɵsanitizeHtml);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.artist.tags);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.artist.similar);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.albums.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.tracks.length > 0);\n      }\n    },\n    directives: [i6.HeaderComponent, i7.NgForOf, i7.NgIf, i8.TrackListComponent],\n    styles: [\"[_nghost-%COMP%]{overflow:auto;display:block;height:100vh;padding-bottom:60px;background:var(--background-color)}[_nghost-%COMP%]     .swiper-slide{width:auto!important}.artist-meta[_ngcontent-%COMP%]{padding-bottom:20px}h3[_ngcontent-%COMP%]{padding-left:10px;color:var(--foreground-color);font-family:Open Sans,sans-serif;font-weight:800;text-transform:uppercase;font-size:1rem}.artist-name[_ngcontent-%COMP%]{font-size:2.7rem;color:var(--foreground-color);font-weight:800;margin-bottom:10px}.artist-picture[_ngcontent-%COMP%]{width:250px;height:250px;margin:20px;border-radius:50%;-o-object-fit:cover;object-fit:cover;box-shadow:0 2px 4px #0000000f}.artist-details[_ngcontent-%COMP%]{margin-left:15px}.artist-bio[_ngcontent-%COMP%]{color:var(--foreground-color)}.app-page-title[_ngcontent-%COMP%]{margin-left:-15px}.tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;gap:10px;margin:1rem}.tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{display:inline-block;border-radius:50px;background-color:var(--background-color-4);color:var(--foreground-color);padding:5px 8px}.tags[_ngcontent-%COMP%]   .tag.inactive[_ngcontent-%COMP%]{color:var(--foreground-color)}.tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]:hover{color:var(--accent-color);cursor:pointer}.albums[_ngcontent-%COMP%]{display:flex;flex-direction:row;overflow:auto;gap:1rem}.albums[_ngcontent-%COMP%]   .album[_ngcontent-%COMP%]:first-of-type{margin-left:1rem}.albums[_ngcontent-%COMP%]   .album[_ngcontent-%COMP%]:last-of-type{margin-right:1rem}.albums[_ngcontent-%COMP%]   .album[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px;min-height:200px;min-width:200px;-o-object-fit:cover;object-fit:cover;border-radius:5px;box-shadow:#1111120a 0 2px 4px,#1314140f 0 1px 1px}.albums[_ngcontent-%COMP%]   .album[_ngcontent-%COMP%]   .column-details[_ngcontent-%COMP%]{margin-top:10px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;text-align:left;max-width:200px;font-size:14px}.albums[_ngcontent-%COMP%]   .album[_ngcontent-%COMP%]   .column-details[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--foreground-color);font-size:14px}.albums[_ngcontent-%COMP%]   .album[_ngcontent-%COMP%]   .column-details[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:var(--foreground-color);opacity:.7;font-size:12px}.play-button[_ngcontent-%COMP%]{background-color:var(--accent-color);color:#fff;display:inline-block;padding:10px 20px;margin-right:15px;border-radius:20px;box-shadow:0 2px 4px #0000000f}.play-button[_ngcontent-%COMP%]:hover{cursor:pointer}.title-action[_ngcontent-%COMP%]{display:flex;align-items:center}.title-action[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex-grow:1}\"]\n  });\n  return ArtistComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}